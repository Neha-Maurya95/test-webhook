# File: pipeline-templates/release.yaml
# This is a file elsewhere in the repository that represents 
# the release stage of our pipeline 

parameters:
- name: ApiTriggered # Required as first property.
  type: object
  default: ''
    

stages:
- stage: Deploy
  jobs:
  - job: Deploy
    pool:
      vmImage: windows-latest
    steps:
    - script: |
        echo "hello world"
      displayName: 'Command Line Script'
    - task: PowerShell@2
      inputs:
        targetType: 'inline'
        script: |
          $variable = '${{parameters.ApiTriggered}}
    - powershell: |
        Write-Host $variable


  - job: manual_approval
    displayName: "Manual Approval"
    dependsOn: Deploy
    pool: server
    steps:
    - task: ManualValidation@0
      timeoutInMinutes: 5
      inputs:
        instructions: "Hi, please validate"
    condition: ne(variables['variable'], 'True')
